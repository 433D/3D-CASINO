<!DOCTYPE html>
<html>
<head>
  <title>賭け履歴</title>
  <script>
    // ページ読み込み時に賭け履歴を表示
    function initialize() {
      var playerId = document.getElementById("playerId").value;
      if (playerId) {
        google.script.run.withSuccessHandler(updateResult)
          .withFailureHandler(showError) // エラーハンドラを追加
          .getBetHistory(playerId, 'https://script.google.com/macros/s/AKfycbwZwNeRB9lRxy-fNGXf5gevLHyjNdB1ErpwHoOJFUS-ByI8PkRbmj1dY-ZR0AyBCe-isw/exec'); // URLを追加
      }
    }

    function updateResult(betHistory) {
      var resultHtml = "<table><tr><th>日付</th><th>賭け対象</th><th>賭け金額</th><th>配当</th></tr>";
      for (var i = 0; i < betHistory.length; i++) {
        resultHtml += "<tr>";
        resultHtml += "<td>" + betHistory[i].date + "</td>";
        resultHtml += "<td>" + betHistory[i].betTarget + "</td>";
        resultHtml += "<td>" + betHistory[i].betAmount + "</td>";
        resultHtml += "<td>" + betHistory[i].dividend + "</td>";
        resultHtml += "</tr>";
      }
      resultHtml += "</table>";
      document.getElementById("result").innerHTML = resultHtml;
    }

    function showError(error) {
      console.error("Error:", error);
      alert("エラーが発生しました: " + error);
    }
  </script>
</head>
<body onload="initialize()">
  <h1>賭け履歴</h1>
  プレイヤーID: <input type="text" id="playerId" oninput="initialize()"><br>
  <div id="result"></div>
</body>
</html>